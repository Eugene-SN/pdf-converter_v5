# upload_1759019435_test_short

## 命令列表

| Command Name                                  | NetFn   | CMD   | Privilege   | 备注                                                                                     |
|-----------------------------------------------|---------|-------|-------------|------------------------------------------------------------------------------------------|
| chassis status                                |         |       | User        | 获取当前服务器 (Server) 状态                                                         |
| chassis restart_cause                         |         |       | User        | 获取服务器 (Server) 系统上次重启原因                                               |
| chassis selftest                              |         |       | User        | 获取服务器 (Server) 系统自检结果                                                   |
| chassis policy always-on/previous/always-off  |         |       | operator    | 设置服务器 (Server) 系统电源 (Power Supply) 恢复策略为自动开机 / 恢复到断电前状态 / 保持关机状态 |
| chassis bootdev {device}                      |         |       | operator    | 设置服务器 (Server) 的启动项                                                       |
| power status                                  |         |       | User        | 获取服务器 (Server) 系统电源 (Power Supply) 当前状态                               |
| power on/up                                   |         |       | operator    | 设置服务器 (Server) 开机                                                           |
| power off/down                                |         |       | operator    | 设置服务器 (Server) 关机                                                           |
| power reset                                   |         |       | operator    | 设置服务器 (Server) 重启                                                           |
| mc info                                       |         |       | User        | 获取服务器 (Server) 管理系统各个模块信息                                           |
| mc selftest                                   |         |       | User        | 获取服务器 (Server) 管理系统自检结果                                               |
| mc reset cold                                 |         |       | Admin       | 设置服务器 (Server) 管理系统冷重启                                                 |
| sdr                                           |         |       | User        | 获取服务器 (Server) 所有传感器的部分信息                                           |
| sensor list                                   |         |       | User        | 获取服务器 (Server) 所有传感器的详细参数信息                                       |
| sensor get {sensor-name}                      |         |       | User        | 获取服务器 (Server) 指定传感器的详细信息                                           |
| sensor thresh {sensor-name}                   |         |       | Admin       | 设置服务器 (Server) 指定传感器的阈值                                               |
| sel                                           |         |       | User        | 获取系统日志信息                                                                     |
| sel elist                                     |         |       | User        | 获取系统详细日志记录                                                               |
| fru                                           |         |       | User        | 获取现场可替换单元信息                                                             |
| session info active                           |         |       | User        | 获取服务器 (Server) 管理系统当前活跃用户的会话信息                                 |
| User list                                     |         |       | User        | 获取所有用户信息                                                                     |
| User set name {User id} {Username}            |         |       | Admin       | 设置服务器 (Server) 管理系统新增用户名                                             |
| User set password {User id} {password}        |         |       | Admin       | 设置服务器 (Server) 管理系统指定用户的密码                                         |
| User test {User id} {16|20} {password}        |         |       | Admin       | 验证用户名密码的正确性                                                             |
| User disable {User id}                        |         |       | Admin       | 关闭指定用户的服务器 (Server) 管理系统的访问权限                                   |
| User enable {User id}                         |         |       | Admin       | 开启指定用户的服务器 (Server) 管理系统的访问权限                                   |
| User priv {User id} {privilege level}         |         |       | Admin       | 设置指定用户的服务器 (Server) 管理系统访问权限                                     |

系统自检结果** |
|--------------|-----------------------------------------------------------------|

### 权限级别

| **权限级别** | **user** |
|--------------|----------|

### 命令示例

```bash
lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis selftest
Self Test Results : passed
```

---

## chassis policy always-on/previous/always-off（设置服务器 (Server)系统电源 (Power Supply)恢复策略）

### 命令描述

| **命令描述** | **chassis policy 命令用来设置服务器 (Server)系统电源 (Power Supply)恢复策略。支持三种策略：** |
|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| | 1. **always-on**：当服务器 (Server)电源 (Power Supply)接通后系统会自动启动 |
| | 2. **previous**：当服务器 (Server)电源 (Power Supply)接通后系统恢复电源 (Power Supply)拔出前的状态 |
| | 3. **always-off**：当服务器 (Server)电源 (Power Supply)接通后系统保持关机状态 |

### 权限级别

| **权限级别** | **operator** |
|--------------|--------------|

### 命令示例

```bash
lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis policy state <state>
```

#### 获取支持的策略列表

```bash
lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis policy state list
```

#### 设置电源恢复策略

```bash
lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis policy state <state>
```

## Command Example

| Command Example                                                                                                      |
|---------------------------------------------------------------------------------------------------------------------|
| `-H [BMC_IP] -U USERID -P PASSW0RD -I`                                                                              |
| `lenovo:~# ipmitool lanplus chassis policy state <state>: list : return supported policies`                          |

## `chassis bootdev {device}` (设置服务器 (Server) 的启动项)

| Command Description | `chassis bootdev` 命令用来设置服务器 (Server) 系统一次性启动选项 |
|---------------------|---------------------------------------------------------------|
| Privilege           | operator                                                    |

## `sol activate` (激活 SOL 功能)

| Command Description | `sol activate` 命令用来激活 SOL 功能。 |
|---------------------|-----------------------------------------|
| Privilege           | administrator                        |
| Command Example     | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol activate usesolkeepalive [SOL Session operational. Use ~? for help]` |

    |

### Request Data Format

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | User ID (Value range: `01h` to `05h`)                                          |
| **2**    | Parameter: <br> `01h` - enable <br> `02h` - severity <br> `03h` - version <br> `04h` - mode <br> `05h` - community <br> `06h` - user <br> `07h` - user encrypt <br> `08h` - password <br> `09h` - pass encrypt <br> `0Ah` - destination IP <br> `0Bh` - port <br> `0Ch` - lan channel <br> `0Dh` - enter ID |

### Response Data Format

#### Parameter `01h` (Enable/Disable)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2**    | `00h` - disable <br> `01h` - enable                                            |

#### Parameter `02h` (Severity)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2**    | `01h` - critical <br> `02h` - critical and warning <br> `03h` - all            |

#### Parameter `03h` (Version)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2**    | `01h` - v1 <br> `02h` - v2c <br> `03h` - v3                                    |

#### Parameter `04h` (Mode)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2**    | Mode value                                                                     |

#### Parameter `05h` (Community)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2:17** | Community string                                                               |

#### Parameter `06h` (User)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2:17** | User string                                                                    |

#### Parameter `07h` (User Encrypt)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2**    | `00h` - user encrypt <br> `01h` - user non-encrypt                              |

#### Parameter `08h` (Password)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2:17** | Password string                                                                |

#### Parameter `09h` (Password Encrypt)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2**    | `00h` - password encrypt <br> `01h` - password non-encrypt                      |

#### Parameter `0Ah` (Destination IP)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2:33** | Destination IP address                                                         |

#### Parameter `0Bh` (Port)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2:3**  | Port number                                                                   |

#### Parameter `0Ch` (LAN Channel)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2**    | LAN channel                                                                    |

#### Parameter `0Dh` (Enter ID)

| **Byte** | **Data Field**                                                                 |
|----------|--------------------------------------------------------------------------------|
| **1**    | Completion code                                                                |
| **2:33** | Enter ID                                                                       |

### Command Example

```bash
# ipmitool -H 10.109.107.160 -U USERID -P PASSW0RD
```

---------------------------------------------------------|------------------------------------------------------------------------|

### SET SNMPTRAPINFO (netfn=`0x30`, cmd=`0x03`)

| Byte | Data Field                                                                                                                                         |
|------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| 1    | **User ID**: This value ranges from `01h` to `05h`.                                                                                               |
| 2    | **Parameter** (Values for different parameters):<br>`01h` - Enable<br>`02h` - Severity<br>`03h` - Version<br>`04h` - Mode<br>`05h` - Community<br>`06h` - User<br>`07h` - User Encrypt<br>`08h` - Password<br>`09h` - Pass Encrypt<br>`0Ah` - Destination IP<br>`0Bh` - Port<br>`0Ch` - LAN Channel<br>`0Dh` - Enter ID |
| 3    | **Below Value for Parameter `01h`**: <br>`00h` - Disable<br>`01h` - Enable<br><br>**Below Value for Parameter `02h`**: <br>`01h` - Critical<br>`02h` - Critical and Warning<br>`03h` - All<br><br>**Below Value for Parameter `03h`**: (To be continued) |
```
```
