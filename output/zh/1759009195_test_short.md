# upload_1759009200_test_short

## 命令列表

| Command Name                                  | NetFn   | CMD   | Privilege   | 备注                                                                     |
|-----------------------------------------------|---------|-------|-------------|--------------------------------------------------------------------------|
| chassis status                                |         |       | User        | 获取当前服务器 (Server) 状态                                                   |
| chassis restart_cause                         |         |       | User        | 获取服务器 (Server) 系统上次重启原因                                           |
| chassis selftest                              |         |       | User        | 获取服务器 (Server) 系统自检结果                                               |
| chassis policy always-on/previous/always-off  |         |       | operator    | 设置服务器 (Server) 系统电源 (Power Supply) 恢复策略为自动开机 / 恢复到断电前状态 / 保持关机状态 |
| chassis bootdev {device}                      |         |       | operator    | 设置服务器 (Server) 的启动项                                                   |
| power status                                  |         |       | User        | 获取服务器 (Server) 系统电源 (Power Supply) 当前状态                               |
| power on/up                                   |         |       | operator    | 设置服务器 (Server) 开机                                                       |
| power off/down                                |         |       | operator    | 设置服务器 (Server) 关机                                                       |
| power reset                                   |         |       | operator    | 设置服务器 (Server) 重启                                                       |
| mc info                                       |         |       | User        | 获取服务器 (Server) 管理系统各个模块信息                                       |
| mc selftest                                   |         |       | User        | 获取服务器 (Server) 管理系统自检结果                                           |
| mc reset cold                                 |         |       | Admin       | 设置服务器 (Server) 管理系统冷重启                                             |
| sdr                                           |         |       | User        | 获取服务器 (Server) 所有传感器的部分信息                                         |
| sensor list                                   |         |       | User        | 获取服务器 (Server) 所有传感器的详细参数信息                                     |
| sensor get {sensor-name}                      |         |       | User        | 获取服务器 (Server) 指定传感器的详细信息                                         |
| sensor thresh {sensor-name}                   |         |       | Admin       | 设置服务器 (Server) 指定传感器的阈值                                             |
| sel                                           |         |       | User        | 获取系统日志信息                                                             |
| sel elist                                     |         |       | User        | 获取系统详细日志记录                                                         |
| fru                                           |         |       | User        | 获取现场可替换单元信息                                                       |
| session info active                           |         |       | User        | 获取服务器 (Server) 管理系统当前活跃用户的会话信息                               |
| User list                                     |         |       | User        | 获取所有用户信息                                                             |
| User set name {User id} {Username}            |         |       | Admin       | 设置服务器 (Server) 管理系统新增用户名                                           |
| User set password {User id} {password}        |         |       | Admin       | 设置服务器 (Server) 管理系统指定用户的密码                                       |
| User test {User id} {16|20} {password}        |         |       | Admin       | 验证用户名密码的正确性                                                       |
| User disable {User id}                        |         |       | Admin       | 关闭指定用户的服务器 (Server) 管理系统的访问权限                                 |
| User enable {User id}                         |         |       | Admin       | 开启指定用户的服务器 (Server) 管理系统的访问权限                                 |
| User priv {User id} {privilege level}         |         |       | Admin       | 设置指定用户的服务器 (Server) 管理系统访问权限                                   |

## 用户权限管理

### 用户权限操作命令

| **命令**               | **权限级别** | **操作描述**                                                                 |
|------------------------|--------------|------------------------------------------------------------------------------|
| User disable {User id} | Admin        | 关闭指定用户的服务器 (Server)管理系统的访问权限                                 |
| User enable {User id}  | Admin        | 开启指定用户的服务器 (Server)管理系统的访问权限                                 |
| User priv {User id} {privilege level} | Admin        | 设置指定用户的服务器 (Server)管理系统访问权限                           |

---

## chassis selftest（获取服务器 (Server)系统自检结果）

### 命令描述

`chassis selftest` 命令用于获取服务器 (Server) 系统自检结果。

| **属性**       | **说明**                                                                 |
|----------------|--------------------------------------------------------------------------|
| **权限级别**   | user                                                                     |
| **命令示例**   | ```bash lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis selftest Self Test Results : passed ``` |

---

## chassis policy always-on/previous/always-off（设置服务器 (Server)系统电源 (Power Supply)恢复策略）

### 命令描述

`chassis policy` 命令用于设置服务器 (Server) 系统电源 (Power Supply) 恢复策略。支持以下三种策略：

1. **always-on**：当服务器 (Server) 电源 (Power Supply) 接通后，系统会自动启动。
2. **previous**：当服务器 (Server) 电源 (Power Supply) 接通后，系统恢复至电源 (Power Supply) 拔出前的状态。
3. **always-off**：当服务器 (Server) 电源 (Power Supply) 接通后，系统保持关机状态。

| **属性**       | **说明**                                                                 |
|----------------|--------------------------------------------------------------------------|
| **权限级别**   | operator                                                                |
| **命令示例**   | ```bash lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis policy state <state>: list : return supported policies ``` |

## chassis bootdev {device} （设置服务器 (Server) 的启动项）

| Command Description   | chassis bootdev 命令用来设置服务器 (Server) 系统一次性启动选项。                                                                 |
|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| Privilege             | operator                                                                                                                               |

## sol activate （激活 SOL 功能）

| Command Description   | sol activate 命令用来激活 SOL 功能。                                                                                                   |
|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| Privilege             | administrator                                                                                                                         |
| Command Example       | ```bash lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol activate usesolkeepalive [SOL Session operational. Use ~? for help] ``` |

## Command Example

| Command Example       | `-H [BMC_IP] -U USERID -P PASSW0RD -I`                                                                                                  |
|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
|                       | ```bash lenovo:~# ipmitool lanplus chassis policy state <state>: list : return supported policies ``` |

        |
|------|---------------------------------------------------------------------------|
| 1    | User ID (范围: `01h` 到 `05h`)                                           |
| 2    | Parameter (具体含义见下表)                                                |

#### Parameter Definitions

| Parameter Value | Description                                                                 |
|-----------------|-----------------------------------------------------------------------------|
| `01h`           | 使能状态 (`00h` - 禁用, `01h` - 启用)                                     |
| `02h`           | 严重性 (`01h` - 严重, `02h` - 严重和警告, `03h` - 全部)               |
| `03h`           | 版本 (`01h` - v1, `02h` - v2c, `03h` - v3)                               |
| `04h`           | 模式 (具体值取决于实现)                                                 |
| `05h`           | 社区字符串 (长度: 17 字节)                                              |
| `06h`           | 用户名 (长度: 17 字节)                                                  |
| `07h`           | 用户加密状态 (`00h` - 加密, `01h` - 非加密)                             |
| `08h`           | 密码 (长度: 17 字节)                                                    |
| `09h`           | 密码加密状态 (`00h` - 加密, `01h` - 非加密)                             |
| `0Ah`           | 目标 IP 地址 (长度: 33 字节)                                            |
| `0Bh`           | 端口号 (长度: 3 字节)                                                   |
| `0Ch`           | LAN 通道 (长度: 2 字节)                                                 |
| `0Dh`           | 进入 ID (长度: 33 字节)                                                 |

### Response Data Format

| Parameter Value | Byte | Data Field                                                                 |
|-----------------|------|---------------------------------------------------------------------------|
| `01h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `01h`           | 2    | 使能状态 (`00h` - 禁用, `01h` - 启用)                                 |
| `02h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `02h`           | 2    | 严重性 (`01h` - 严重, `02h` - 严重和警告, `03h` - 全部)             |
| `03h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `03h`           | 2    | 版本 (`01h` - v1, `02h` - v2c, `03h` - v3)                             |
| `04h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `04h`           | 2    | 模式 (具体值取决于实现)                                               |
| `05h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `05h`           | 2:17 | 社区字符串 (长度: 17 字节)                                            |
| `06h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `06h`           | 2:17 | 用户名 (长度: 17 字节)                                                |
| `07h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `07h`           | 2    | 用户加密状态 (`00h` - 加密, `01h` - 非加密)                           |
| `08h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `08h`           | 2:17 | 密码 (长度: 17 字节)                                                  |
| `09h`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `09h`           | 2    | 密码加密状态 (`00h` - 加密, `01h` - 非加密)                           |
| `0Ah`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `0Ah`           | 2:33 | 目标 IP 地址 (长度: 33 字节)                                          |
| `0Bh`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `0Bh`           | 2:3  | 端口号 (长度: 3 字节)                                                 |
| `0Ch`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `0Ch`           | 2    | LAN 通道 (长度: 2 字节)                                               |
| `0Dh`           | 1    | 完成码 (`00h` - 成功, 其他值表示错误)                                 |
| `0Dh`           | 2:33 | 进入 ID (长度: 33 字节)                                               |

### Command Example

```bash
# ipmitool -H 10.109.107.160 -U USERID -P PASSW0RD raw 0x30 0x02 01
```

### Notes

- 该命令用于获取或设置 SNMP Trap 相关配置信息。
- 参数值的具体含义请参考上表。
- 完成码 (`00h`) 表示命令执行成功，其他值表示错误，需根据具体错误码进行排查。

ASSW0RD` |
|-------------------------------------------------------------------------|-------------------------------------------------------------------------|-------------------------------------------------------------------------|

### SET SNMPTRAPINFO (netfn=`0x30`, cmd=`0x03`)

| Byte | Data Field                                                                                                                                         |
|------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| 1    | **User ID**: This value ranges from `01h` to `05h`.                                                                                               |
| 2    | **Parameter** (values for different parameters):<br>`01h` - Enable<br>`02h` - Severity<br>`03h` - Version<br>`04h` - Mode<br>`05h` - Community<br>`06h` - User<br>`07h` - User Encrypt<br>`08h` - Password<br>`09h` - Pass Encrypt<br>`0Ah` - Destination IP<br>`0Bh` - Port<br>`0Ch` - LAN Channel<br>`0Dh` - Enter ID |
| 3    | **Parameter Values**:<br>For parameter `01h` (Enable):<br>`00h` - Disable<br>`01h` - Enable<br>For parameter `02h` (Severity):<br>`01h` - Critical<br>`02h` - Critical and Warning<br>`03h` - All<br>For parameter `03h` (Version): |

```markdown
```