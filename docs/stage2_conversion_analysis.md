# Stage 2 Conversion Run Analysis (manual__2025-09-27T21:39:56)

## 1. Run Overview
- CLI –∑–∞–≤–µ—Ä—à–∏–ª –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é `test_short.pdf` –≤ `output/zh/1759009195_test_short.md` (171 —Å—Ç—Ä–æ–∫, 15903 –±–∞–π—Ç), —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –ø—Ä–æ–≥–æ–Ω –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫ –≠—Ç–∞–ø–∞ 2. „ÄêF:logs/conversion_20250928_004615.log‚Ä†L1-L10„Äë
- –ò—Ç–æ–≥–æ–≤—ã–π Markdown —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ –∫–æ–¥–æ–≤—ã—Ö –±–ª–æ–∫–∞—Ö (—Å–º. —Ä–∞–∑–¥–µ–ª 4), –ø–æ—ç—Ç–æ–º—É —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PDF ‚ÜîÔ∏è MD –ø–æ–∫–∞ –¥–∞–ª–µ–∫–æ –æ—Ç —Ç—Ä–µ–±—É–µ–º—ã—Ö 100%.

## 2. –≠—Ç–∞–ø Document Preprocessing
- `validate_input_file` —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `enable_ocr: true`, `has_chinese_text: False` –∏ `recommended_ocr: True`, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç OCR –¥–ª—è –¥–∞–∂–µ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ PDF. „ÄêF:logs/dag_id=document_preprocessing/run_id=manual__2025-09-27T21:39:58.81851300:00/task_id=validate_input_file/attempt=1.log‚Ä†L10-L32„Äë
- `process_document_with_api` –ø–µ—Ä–µ–¥–∞–ª –≤ document-processor –æ–ø—Ü–∏–∏ —Å `use_ocr': True`, –∏–∑-–∑–∞ —á–µ–≥–æ Docling –≤—ã–ø–æ–ª–Ω—è–ª —Ç—è–∂–µ–ª—ã–π OCR –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è. „ÄêF:logs/dag_id=document_preprocessing/run_id=manual__2025-09-27T21:39:58.81851300:00/task_id=process_document_with_api/attempt=1.log‚Ä†L10-L11„Äë
- –í—ã–≤–æ–¥: –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ PyMuPDF –∏–ª–∏ –∏–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –ø–æ–º–µ—á–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∫–∞–∫ ¬´–Ω–µ –∫–∏—Ç–∞–π—Å–∫–∏–π¬ª, —á—Ç–æ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ª–æ–∂–Ω–æ–º—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—é `recommended_ocr`. –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø –¥–æ–ª–∂–µ–Ω —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –Ω–∞–ª–∏—á–∏—è —Ç–µ–∫—Å—Ç–∞ (fallback –Ω–∞ pdfminer/shell `pdftotext`) –∏ —è–≤–Ω–æ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏—á–∏–Ω—ã –≤–∫–ª—é—á–µ–Ω–∏—è OCR.

## 3. –≠—Ç–∞–ø Content Transformation
- –ë–∞–∑–æ–≤—ã–µ –∫–∏—Ç–∞–π—Å–∫–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–µ–∑ —É—Å–ª–æ–≤–∏–π, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –ª–æ–≥–æ–≤ `üîÑ` ‚Üí `üìù` ‚Üí `üèóÔ∏è`, –æ–¥–Ω–∞–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ 100% –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –¥–∞–∂–µ –¥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –∏—Å—Ö–æ–¥–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π. „ÄêF:logs/dag_id=content_transformation/run_id=manual__2025-09-27T21:40:32.15917600:00/task_id=perform_basic_transformations/attempt=1.log‚Ä†L10-L16„Äë
- vLLM —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ 6 —á–∞–Ω–∫–æ–≤, –Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 5 —á–∞–Ω–∫–æ–≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ 20‚Äì40 —Å–µ–∫—É–Ω–¥, –ø–æ—Å–ª–µ —á–µ–≥–æ —á–∞–Ω–∫–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π Markdown. „ÄêF:logs/dag_id=content_transformation/run_id=manual__2025-09-27T21:40:32.15917600:00/task_id=perform_vllm_enhancement/attempt=1.log‚Ä†L10-L39„Äë
- vLLM-—É–ª—É—á—à–µ–Ω–∏–µ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–æ–¥–µ–ª–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã, —á—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –¥–∞–ª—å–Ω–µ–π—à–∏–º –∏—Å–∫–∞–∂–µ–Ω–∏—è–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Markdown. –ù—É–∂–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏ –∫–æ–¥–æ–≤—ã–µ –±–ª–æ–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ LLM –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–æ–±—Ä–∞–±–æ—Ç–∫—É —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

## 4. –≠—Ç–∞–ø Quality Assurance
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (Level 2) –ø—Ä–æ–ø—É—â–µ–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ Docker Pandoc –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω; SSIM –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è. „ÄêF:logs/dag_id=quality_assurance/run_id=manual__2025-09-27T21:43:07.57498000:00/task_id=perform_visual_comparison/attempt=1.log‚Ä†L10-L13„Äë
- –£—Ä–æ–≤–µ–Ω—å 5 –ø—Ä–∏–º–µ–Ω–∏–ª –¥–≤–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ vLLM —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é 1.0, —á—Ç–æ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è. „ÄêF:logs/dag_id=quality_assurance/run_id=manual__2025-09-27T21:43:07.57498000:00/task_id=perform_auto_correction/attempt=1.log‚Ä†L10-L13„Äë
- –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∫–∏, —Ñ–∏–Ω–∞–ª—å–Ω—ã–π QA-–æ—Ç—á–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–∏—à—å 89.3% –∏ ¬´enterprise pass¬ª, –ø–æ—ç—Ç–æ–º—É –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–µ–ª—å–∑—è —Å—á–∏—Ç–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–º. „ÄêF:logs/dag_id=quality_assurance/run_id=manual__2025-09-27T21:43:07.57498000:00/task_id=finalize_qa_process/attempt=1.log‚Ä†L1-L10„Äë

## 5. Markdown ‚ÜîÔ∏è PDF –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- –ì–ª–∞–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–º–∞–Ω–¥ —Ä–∞–∑–æ—Ä–≤–∞–Ω–∞ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ —Å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ—á–∏—Ç–∞–µ–º—ã–º. „ÄêF:output/zh/1759009195_test_short.md‚Ä†L5-L43„Äë
- –¢–∞–±–ª–∏—Ü—ã –∏ –±–ª–æ–∫–∏ –≤–æ–∫—Ä—É–≥ —Å–µ–∫—Ü–∏–∏ ¬´Command Example¬ª —Å–æ–¥–µ—Ä–∂–∞—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã ¬´|------|¬ª, —Å–º–µ—â–µ–Ω–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –∏ –ª–∏—à–Ω–∏–µ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏, –∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ ¬´ASSW0RD` |¬ª, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. „ÄêF:output/zh/1759009195_test_short.md‚Ä†L90-L160„Äë

## 6. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
1. **–≠—Ç–∞–ø 3A ‚Äî –ù–∞–¥–µ–∂–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è.**
   - –î–æ–±–∞–≤–∏—Ç—å fallback-–ø—Ä–æ–≤–µ—Ä–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `pdfminer.six` –∏–ª–∏ `pdftotext`) –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –≤–∫–ª—é—á–µ–Ω–∏—è OCR.
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: –ø—Ä–æ–≥–Ω–∞—Ç—å Stage 1 –Ω–∞ —ç—Ç–∞–ª–æ–Ω–Ω–æ–º PDF –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `enable_ocr` –∏ `use_ocr` –æ—Å—Ç–∞—é—Ç—Å—è `False` –≤ –ª–æ–≥–∞—Ö DAG.
2. **–≠—Ç–∞–ø 3B ‚Äî –ò–∑–æ–ª—è—Ü–∏—è —Ç–∞–±–ª–∏—Ü –æ—Ç –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π.**
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π Markdown –¥–æ vLLM, –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ç–∞–±–ª–∏—Ü –∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `enhance_chinese_tables` / `clean_chinese_formatting`.
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: –ª–æ–∫–∞–ª—å–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–æ/–ø–æ—Å–ª–µ Stage 2 (diff –ø–æ Markdown –±–µ–∑ LLM).
3. **–≠—Ç–∞–ø 3C ‚Äî –ñ–µ—Å—Ç–∫–∏–µ —Ä–∞–º–∫–∏ –¥–ª—è vLLM –∏ QA.**
   - –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å Level 5 –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—é –∏–ª–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø—Ä–∞–≤–∫–∏ —Ç–æ–ª—å–∫–æ –≤–Ω–µ —Ç–∞–±–ª–∏—Ü/–∫–æ–¥–∞; –æ–±–µ—Å–ø–µ—á–∏—Ç—å fallback –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ Docker.
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: –≤—ã–ø–æ–ª–Ω–∏—Ç—å QA –æ—Ç–¥–µ–ª—å–Ω–æ, —É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏—Ç—å—Å—è, —á—Ç–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —Å—Ç—Ä–æ–∏—Ç—Å—è, –∞ –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—è –Ω–µ –º–µ–Ω—è–µ—Ç —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã.

–ö–∞–∂–¥—ã–π —à–∞–≥ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç—Ä–µ–±—É–µ–º—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É.
